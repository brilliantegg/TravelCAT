@model TravelCat.Models.comment
@using Microsoft.AspNet.Identity
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/web-Layout.cshtml";

}







<form action="/web_comments/Create" method="post" enctype="multipart/form-data">
    @Html.AntiForgeryToken()

    <div class="form-horizontal container">
        <h2>新增評論</h2>
        <hr />
        <!--觀光編號預設值-->
        <input type="hidden" id="tourism_id" name="tourism_id" value="@ViewBag.tourismID" />


        <div class="form-group">
            @Html.LabelFor(model => model.comment_title, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.comment_title, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.comment_title, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.comment_content, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-5">
                @Html.EditorFor(model => model.comment_content, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.comment_content, "", new { @class = "text-danger" })
            </div>
        </div>
        <!--發表時間 -->
        <input type="hidden" id="comment_date" name="comment_date" value="@DateTime.Now.ToString("yyyy/MM/dd")" />

        <!--上傳圖片-->
        <div class="form-group">
            @Html.LabelFor(model => model.comment_photo, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-5">
                <label class="btn btn-info">
                    <input type="file" id="imgInp" name="comment_photo" style="display:none;" accept="image/gif, image/jpeg, image/png">
                    <i class="fa fa-photo"></i> 上傳圖片
                </label>
                <br />

                <img id="preview_img" src="http://icons.iconarchive.com/icons/grafikartes/flat-retro-modern-2/512/preview-icon.png" alt="預覽圖片" width="150" />
                @Html.ValidationMessageFor(model => model.comment_photo, "", new { @class = "text-danger" })
            </div>
        </div>
        <!--停留時間-->
        <div class="form-group">
            @Html.LabelFor(model => model.comment_stay_total, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-5">
                <div class="input-group mb-3">
                    <select class="custom-select" id="comment_stay_total" name="comment_stay_total">
                        <option selected>Choose...</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option value="4">3小時以上</option>
                    </select>
                </div>
                @Html.ValidationMessageFor(model => model.comment_stay_total, "", new { @class = "text-danger" })
            </div>
        </div>
        <!--旅伴-->
        <div class="form-group">

            @Html.LabelFor(model => model.travel_partner, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-5">
                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-info travel_partner active">
                        <input type="radio" name="travel_partner" id="option1" autocomplete="off" checked value="蜜月"> 蜜月
                    </label>
                    <label class="btn btn-warning travel_partner">
                        <input type="radio" name="travel_partner" id="option2" autocomplete="off" value="伴侶"> 伴侶
                    </label>
                    <label class="btn btn-info travel_partner">
                        <input type="radio" name="travel_partner" id="option3" autocomplete="off" value="家庭"> 家庭
                    </label>
                    <label class="btn btn-warning travel_partner">
                        <input type="radio" name="travel_partner" id="option4" autocomplete="off" value="朋友"> 朋友
                    </label>
                    <label class="btn btn-info travel_partner">
                        <input type="radio" name="travel_partner" id="option5" autocomplete="off" value="商務"> 商務
                    </label>
                </div>
            </div>
            @Html.ValidationMessageFor(model => model.travel_partner, "", new { @class = "text-danger" })
        </div>
        <!--bottom-->
        <div class="form-group">
            @Html.LabelFor(model => model.comment_rating, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-5">
                @Html.RadioButton("comment_rating", "1", true)1
                @Html.RadioButton("comment_rating", "2", true)2
                @Html.RadioButton("comment_rating", "3", true)3
                @Html.RadioButton("comment_rating", "4", true)4
                @Html.RadioButton("comment_rating", "5", true)5
                @Html.ValidationMessageFor(model => model.comment_rating, "", new { @class = "text-danger" })
            </div>

            @*<div class="ratings">
                <div class="empty-stars">★★★★★</div>
                <div class="full-stars" style="width:100%">★★★★★</div>
            </div>*@
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.travel_month, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-5">

                <div class="input-group mb-3">
                    <select class="custom-select" id="inputGroupSelect01" name="travel_month">
                        <option selected>Choose...</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                    </select>
                </div>

                @Html.ValidationMessageFor(model => model.travel_month, "", new { @class = "text-danger" })
            </div>
        </div>
        <!--評論狀態-->
        <input type="hidden" id="comment_status" name="comment_status" value="true" />

        <!--會員ID-->
        <input type="hidden" id="member_id" name="member_id" value="@Session["memberID"]" />


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-outline-dark" />
            </div>
        </div>
    </div>

    

</form>

@section scripts {
    <script>

    function readURL(input){
      if(input.files && input.files[0]){
        var reader = new FileReader();
        reader.onload = function (e) {
            $("#preview_img").attr('src', e.target.result);
            console.log(e.target.result)
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $("#imgInp").change(function(){
    //當檔案改變後，做一些事
    readURL(this);   // this代表<input id="imgInp">
    });

    </script>


}


